@use super::super::prelude::*;
@use super::page_base;
@use crate::models::{Post, Tag};

@(fluent: &FluentLanguageLoader, h1: &str, posts: &[(Post, Vec<Tag>)], years: &[i16], other_langs: &[String])

@:page_base(fluent, h1, other_langs, {

  <p class="tagline">@fl!(fluent, "tagline")</p>

  @for (post, tags) in posts {
  <article id="post_@(post.year)_@post.slug" lang="@post.lang">
    <h2><a href="@post.url()">@Html(&post.title)</a></h2>
    <p class="publine">@Html(post.publine(tags))</p>
    @Html(&post.content)
  </article>
  }

  @if let Some((first, rest)) = years.split_first() {
  <p>@fl!(fluent, "from-year")
    <a href="/@first/@fluent.current_language()">@first</a>@for year in rest {,
    <a href="/@year/@fluent.current_language()">@year</a>}.</p>
  }
})
